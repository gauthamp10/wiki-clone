<!DOCTYPE html>
<html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="styleshet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />
    <style>
        .modal{
        max-width: 100%;
        width:100%;
        height: 92%;
        }

    </style>
    </head>
    <body>
        <table class="table table-bordered table-striped" id="wikitable">
        </table> 

  <iframe src="" height="100%" width="100%" id="loadwiki"></iframe>


    </body>

    <script>        
        function fetchRandomWiki(count) {

            console.log("Fetching some Random Wiki.....");
            $.ajax({
                url: "https://en.wikipedia.org/w/api.php?action=query&list=random&rnnamespace=0&rnlimit="+count+"&format=json&origin=*",
                dataType: "jsonp",
        
            // Work with the response
            success: function( response ) {
              $.each( response['query']['random'], function( key, val ) {
                        title = val['title']
                        id = val['id']
                        console.log(id);
                        getData(title,id)
                    });
                    
            },
            complete: function() {
        // When AJAX call is complete, will fire upon success or when error is thrown
                console.log('AJAX call 1 completed');
            },
            
            
            });
                         
        } 
       


        function getData(title,id){
            $.ajax({
                url: "https://en.wikipedia.org/w/api.php?action=query&prop=pageimages&pithumbsize=200&format=json&titles="+title,
                dataType: "jsonp",
        
            // Work with the response
            success: function( response ) {
                wiki_data = '';
                baseLink ='https://en.wikipedia.org/?curid='
              $.each( response['query'], function( key, val ) {
                if(val[id]['thumbnail']){
                        console.log(val[id]['title']);
                        console.log(val[id]['thumbnail']);
                        wiki_data += '<tr>';
                        wiki_data += '<td><a href='+baseLink+id+' target="loadwiki"><img src="'+val[id]['thumbnail']['source']+'"><br>'+title+'</a></td>';                        
                        wiki_data += '</tr>';
                }
                else  
                {
                    rand = (0x1000000+(Math.random())*0xffffff).toString(16).substr(1,6);
                    let fonts = ["lobster","bebas","noto","museo"];
                    let font = fonts[Math.floor(Math.random() * fonts.length)];
                    wiki_data += '<tr>';
                        wiki_data += '<td><a href='+baseLink+id+' target="loadwiki"><img src="https://fakeimg.pl/350x200/'+rand+'/000/?font='+font+'&text='+title.substring(0,6)+'..."><br>'+title+'</a></td>';
                        wiki_data += '</tr>';

                }  
                    });
                    $('#wikitable').append(wiki_data);  
            },
            complete: function() {
        // When AJAX call is complete, will fire upon success or when error is thrown
                console.log('AJAX call 2 completed');
            },
            
            
            });

        }

     fetchRandomWiki(300)
   
     
     
    </script>
   
</html>